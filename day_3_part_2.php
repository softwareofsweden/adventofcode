<?php

$map = [
    '.....#.........#...#..##....#..',
    '.#........#...#........#.......',
    '......#......#..#...#....#.#..#',
    '...#.#####.#.......##.#........',
    '...........#......#..#.....#...',
    '#.#..#...#.#...#.##.....#.....#',
    '....#..#....#...#.#...#.##.....',
    '##...#..........##..######.....',
    '.....#...#......#.............#',
    '........##....#...##..#....#...',
    '...#...#.........#.#..........#',
    '..#.#.....##..........#........',
    '##.......................#.....',
    '#..#...##...##.#.........##....',
    '.#....#.#####....#...#...#.....',
    '#......#......###..#........#.#',
    '.#....##..##.###.#.......#.....',
    '.#..#.........##....#.#....#...',
    '........#..................#...',
    '.......#..#..#............#....',
    '........#...................##.',
    '.#......#......#.####......#...',
    '..###.#..#..#.........#........',
    '..#...........###..#.....#.##..',
    '...#.##.#....#................#',
    '#.....#.............#.#........',
    '.#..............#.........#....',
    '##.................#..........#',
    '.#..#....#.###....##..#..#...#.',
    '##........#......##.....#....##',
    '#......#..#........#......#.#..',
    '....#.##.#.............#...##..',
    '.#...#...#..#............##...#',
    '.#..#...#..#..#....##..#.#.#...',
    '#....#...##.#.#......#........#',
    '#..#..#...#.#.....#..##.#......',
    '.....#..#.#..#.##.......#..###.',
    '#......#......#...#............',
    '.....#......#......#..#.##..#.#',
    '......#..##..#.....#....#......',
    '..#..#...#..#...#....###.#.#...',
    '.................#..#..........',
    '......#...##..#.....#...##.....',
    '..#...............#...#.#.....#',
    '.#....#.##.##..#.........##....',
    '...###....##...#......#......##',
    '....#...#.....#.........#..##..',
    '..###.........#..#..#...#......',
    '...##.....#.........#.......#..',
    '.....#.................#.#.....',
    '.#.###.#..#...#..##....#....##.',
    '....#.....##.........#.#.......',
    '.#.#....#..#................#..',
    '..#.#......#......#........#...',
    '#........#....#..#..#..#....#.#',
    '#...........##..#....#..####...',
    '.....#.......#.#...#.#....###..',
    '.......#....#.......#..........',
    '.............#.....#...........',
    '#....#......#...#..##.#........',
    '....#.......#.#.......#....###.',
    '.####.#...........#.#.#...#.#..',
    '#..##....##.#......#...........',
    '...##...#.#.....#.....#........',
    '...#.............#.....#...#...',
    '...#.....#..#.....##...###..#.#',
    '....##..#..##..#..#...#.....#..',
    '........#...................##.',
    '....#.......#.....#.......#....',
    '....##.........#.#.............',
    '......#..#........#.#...#......',
    '.#..#...#...........#......#..#',
    '.#....#.#........#............#',
    '......#...................#...#',
    '##...#.......................#.',
    '........###.......#.......#..#.',
    '...........##.............#....',
    '..##...#.....#....#......#....#',
    '................###...##...#.#.',
    '..#.#.....#....##...#..##......',
    '.....................#.#......#',
    '.......#....##.#..#........##..',
    '.##....#......#....#.........#.',
    '#............#.........#..#.#..',
    '....#...........#..#....#....##',
    '.......#..#.....##.........#...',
    '.##..........#.#.#....#..#.....',
    '........#....##.##.#......#....',
    '....##..##......##.....#.###...',
    '......##.#....##.#.#....#......',
    '..#..#..........#.....##.....##',
    '#........#.##...#.#....#....###',
    '........##............#........',
    '##.##..##.#..#...##............',
    '....#..#....#...........#....#.',
    '..#.......#.#.......#...#......',
    '.#..........##.....#..#...#...#',
    '.................##.#...#...##.',
    '##.............#......#....#...',
    '..........#.#....#.............',
    '...##..#.#.....#.....#.#.......',
    '...##...##.#......#.#...#......',
    '..#..#.....##..##..........##..',
    '......##........##.......#....#',
    '....#..####..#...##........#...',
    '#.......#....#.......##.......#',
    '........#..........#.........#.',
    '.....#....#.........#.#.#.....#',
    '..##.....#....#....#..#......#.',
    '....#..#.##...#..#.....#......#',
    '........###.........#..###...#.',
    '.....#.......#.....#.#.#.......',
    '...##.....#....##.....#.#.#...#',
    '#.##....#.##.....#.#.#........#',
    '.##..#.......#...#.#.......#...',
    '.#..........#.............#....',
    '.#...#...#......#..##..........',
    '.......................#.#....#',
    '............###....#..##.#..#..',
    '...#.#......##....#..#.........',
    '..#...#....#....#.#............',
    '..#.#..###...............##....',
    '.....##...#.....#........#..#.#',
    '...........#......#..#...#.##.#',
    '#...##......##...#..#...#..#...',
    '..##....#............#......#.#',
    '.#.#..#...#...#.#...#...##..##.',
    '..#.#....#.......#.#.#.#.#.##..',
    '....###.##..#...##....#........',
    '.#...............#........#....',
    '...#..#........##...#.##.......',
    '........#..#..#......##........',
    '##....#....#............#......',
    '#....#...#.###.#.###.......#...',
    '...#.###.##....#.........#...##',
    '..#......##.#.....#..#.......#.',
    '##.............#..#..##....#.#.',
    '#...#...##........#.#.......#..',
    '........#..#.....#.#..#..#.#...',
    '#..##.........#.#.#.##...#....#',
    '............#...#....#..#....#.',
    '.....#.......#......##..#......',
    '.#.....................#......#',
    '...................#....#.#....',
    '.....#....#.....##.............',
    '#....##.#....##..#....##....#..',
    '....#..........#..........#....',
    '.....#.#...............#..##...',
    '...#......###.......#..##......',
    '#.#.#....##..#......#.##.#.....',
    '.#...###..#.....##.........#.#.',
    '..#...#.............#....#.....',
    '#..#.............#.....#.....#.',
    '.#.........#.#...#..#....#...#.',
    '#....#......#....#.#..........#',
    '.........................#.....',
    '...................#...........',
    '#.#...#......#....#............',
    '.#..#........#...##....#....#..',
    '..#......#..#..........##......',
    '#.#....#....##....#.........#..',
    '...#.#.#.#..#....##..#....#..#.',
    '..#..............#.....##......',
    '....#.........#...#.....#..#...',
    '..#..................#.#.......',
    '.....##.##........#.#....#..###',
    '..#.#...#.....#..##..##.#.#.#..',
    '.....#......#............#.....',
    '.#.......#....##...............',
    '...#.................#.....#...',
    '...#.#..#.#...##........#....##',
    '..........##...................',
    '#........#..........#.#........',
    '................#..##.##.#....#',
    '....##..#.#.#...#...#....#.#.#.',
    '..#.........#......##....#.....',
    '.##.........#.....#.#..........',
    '...##...###...........#......##',
    '..#........#......#.....##.#...',
    '###.....#.#.#...#.......#....#.',
    '..##...#....###..##.#.#..##....',
    '..###...##.......#.#..#....#..#',
    '..#...............###....#..#..',
    '...........#....#.##..#........',
    '.#...#..#.#...##..#....#...#..#',
    '..#............#......#.....#..',
    '.#...#...#.#...#.#.............',
    '...####.........#....##....#.#.',
    '.....##...#........#.#......#..',
    '...####...#.#..#.#.#.#.........',
    '........#.##.#..#.......#......',
    '......##......#.........#.#....',
    '..#.#...#....#.....###.....##..',
    '#.#.##..........#...##..#..#.#.',
    '.....#................#.#..#..#',
    '.........#........#.....#..#..#',
    '......#...........#...........#',
    '..#........#.#.........#...##..',
    '.....####.....#....##.#........',
    '....#...#........#.......#...#.',
    '...#..#....#.....##....###.....',
    '........#..#..#.#.#............',
    '#..#......#..#....#....#.#.#..#',
    '.........#...#......##.........',
    '..#....#............#..#.....#.',
    '#............#.#...#......#...#',
    '..#..##...#........#.........##',
    '.#...#....##...#.......#..##...',
    '#..#.##......#........##...#...',
    '...#..........#...#..#..#....#.',
    '##..#........##..##...#..###.#.',
    '............##...............#.',
    '#......#...#....#.........#...#',
    '................#..#.#.........',
    '.....#...#...#...##.......#...#',
    '..##.###...#...#.#..##.#.#...#.',
    '#...##..........#....##.#.#.#..',
    '.#.........#..........#........',
    '.......#.#...............#.....',
    '...#...#............#..........',
    '.........#..#..........#.......',
    '.........#..#...#....#.##....#.',
    '..#............#......#....#.##',
    '...#...#.#........#......#..#.#',
    '........#......##...##...#..#.#',
    '.......###......#............#.',
    '#.....#...##.#.#...#.......#.#.',
    '..#......#..............##....#',
    '..#............##.......#.#.#.#',
    '...#.#.....#.#.#........####...',
    '...#................#..........',
    '..#...#....#....#......#..#...#',
    '.###......#..............#.#..#',
    '......#......#..........##..#..',
    '...##.#...........#.#.....##.#.',
    '.#...#......#..........#.......',
    '....#...#....#..........#.#....',
    '..................##..#.....#.#',
    '###.................#......##..',
    '.....#.....#............#.#..#.',
    '.....#........#...#....#.#.....',
    '#.#...#........................',
    '.#...#.......#..#.......#......',
    '.......#.#.....###.#...#.#.....',
    '#...#.#...........##...#.......',
    '.#.......#.....#..#..#....#....',
    '...#..##.....#..#..#.....#.....',
    '...#................###......#.',
    '#..#...##.###..#..##.......#...',
    '.#.#.#........#.#.............#',
    '#.......#..#.......#.....##...#',
    '.#.#.#............#..#....#.#..',
    '...#.#.##.#......##.....#....##',
    '#............###...#....#......',
    '.....#..#..#.#.........##.#....',
    '.#.##........#.#.#...#.......#.',
    '..###..#..#.#...#.##...###.....',
    '#............#.............#...',
    '.#.##.....#..#.......#...#...#.',
    '.#...#........###...####.......',
    '.#.#..##..#.....#.#..#.........',
    '....#.#.#............##..#...#.',
    '###.##......#.#.....#.....#....',
    '.........#...##.....##....#....',
    '..#................#.........#.',
    '#.......###..##..##............',
    '.....#...#.............#..#..#.',
    '..........#...................#',
    '....#....#...........#.........',
    '.##.......##.##.........##.....',
    '#......#.#....#....#...#.#.#...',
    '..#.##..#.###.#.##....#..#.....',
    '#....##.#...#..................',
    '.......#...#...........#...#...',
    '....###.#...#..#...............',
    '##.#.#..#.#......#.#......#...#',
    '.............#.....#.##....#...',
    '#.............###....#...#.##.#',
    '#..#.##.............#.##...#...',
    '.#.#......#.........#...#......',
    '.#.........#.#.#.....##.#.#....',
    '.................#........#....',
    '....##.#.#..#.........#........',
    '#...##......##....#.#..#......#',
    '..........##...##..#......##...',
    '..........#..#.#..##..#..#.....',
    '..#..#.....##........#...#.#...',
    '#..........#.#.#..............#',
    '#..........##.....#.#...##....#',
    '.....#...#..#..#...##.#.......#',
    '.##.#...............#.#...#....',
    '..........#.....#......#.......',
    '.....#.#......##...#.......#...',
    '...........#.#...#.....#....#.#',
    '.###.#........##....#.##...#...',
    '#....#.##....#.###..##.#.......',
    '##...........#..##.........#...',
    '....#.##...#...#.....#.#..#....',
    '........#.#.#..#.#...........##',
    '..........#.##...#....#......#.',
    '.##.....#.#.....##.#.......#.#.',
    '.#..#....#.#.....#.##.#....#..#',
    '#.......#..#..........##....#..',
    '.#........#...#..#.#...#....#..',
    '#......##...#...##..#.#.......#',
    '.#......#.##.#............##.#.',
    '.#....#.....##..##..........#..',
    '..###..#..#...#...#.#.#..##....',
    '.#.#.##...#..#...........#....#',
    '....#......#.......##...#.#.#..',
    '.......#..#...##..#.........#..',
    '....#..#.#.......##........#..#',
    '........#.#....#.##..#.......#.',
    '.....#.......#.#...#.#.........',
    '........#...#....#.#....###..#.',
    '......#..#.##..##..#...#.#.....',
    '.#.#.....#.....#....#...#...#..',
    '...#..#...#..#......#..#.#.....',
    '...##...#...........#..#......#',
    '..#...#####..#.#.##....##......',
    '...........#......#.#..#.......',
    '..#....##..#.##.......#.#.#..#.',
    '..#..#........#...#.......#....',
];

$nbrTreesArr = [];
$mapWidth = 31;

$slopes =
    [
        ['right' => 1, 'down' => 1],
        ['right' => 3, 'down' => 1],
        ['right' => 5, 'down' => 1],
        ['right' => 7, 'down' => 1],
        ['right' => 1, 'down' => 2],
    ];

foreach ($slopes as $slope) {
    $nbrTrees = 0;
    $right = $slope['right'];
    $down = $slope['down'];
    $x = 0;
    for ($y = $down; $y < count($map); $y = $y + $down) {
        $x += $right;
        $xMap = $x % $mapWidth;
        if ($map[$y][$xMap] == '#') {
            $nbrTrees++;
        }
    }
    $nbrTreesArr[] = $nbrTrees;
}

echo array_product($nbrTreesArr) . "\n";
